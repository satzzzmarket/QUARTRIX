<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard - QUARTRIX</title>
<link rel="icon" href="https://i.ibb.co.com/7xxVWwH7/IMG-8428.png">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{background:#5a3e2b;color:#fff5e6;min-height:100vh;display:flex;flex-direction:column}
header{background:#ff8c42;padding:1.5rem 2rem;display:flex;justify-content:space-between;align-items:center}
header a{color:#fff5e6;text-decoration:none;letter-spacing:2px}
.logout{background:#3e2c23;color:#fff;border:none;padding:10px 18px;border-radius:8px;font-weight:600;cursor:pointer}
main{max-width:1000px;margin:auto;padding:2rem;flex:1}
.card{background:#fff5e6;color:#3e2c23;border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 10px 25px rgba(0,0,0,.35)}
.card h2{margin-bottom:1rem;color:#5a3e2b}
ul{list-style:none}
li{padding:10px;border-bottom:1px solid #ddd;font-weight:600}

/* JADWAL */
#jadwalButtons{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1rem}
.hari-btn{background:#ff8c42;color:#fff;border:none;padding:8px 16px;border-radius:8px;font-weight:600;cursor:pointer}
.hari-btn.active{background:#3e2c23}
#jadwalDetail li{border-left:4px solid #ff8c42;padding-left:12px}

/* ADMIN */
#adminPanel input,#tambahTugasPanel input{
  width:100%;padding:10px;margin:.4rem 0;border-radius:8px;border:1px solid #ccc
}
button{cursor:pointer}
footer{text-align:center;padding:1rem;background:#3e2c23}
</style>
</head>

<body>

<header>
  <h1><a href="index.html">QUARTRIX</a></h1>
  <button class="logout" onclick="logout()">Logout</button>
</header>

<main>

<div class="card"><p id="info"></p></div>

<div class="card" id="adminPanel" style="display:none">
  <h2>Tambah Siswa</h2>
  <input id="namaBaru" placeholder="Nama Lengkap">
  <input id="absenBaru" type="number" placeholder="Nomor Absen">
  <button onclick="tambahSiswa()">Tambah</button>
</div>

<div class="card">
  <h2>Jadwal Pelajaran</h2>
  <div id="jadwalButtons"></div>
  <ul id="jadwalDetail"></ul>
</div>

<div class="card">
  <h2>Daftar Tugas</h2>
  <ul id="tugasList"></ul>
  <div id="tambahTugasPanel" style="display:none;margin-top:1rem">
    <input id="tugasBaru" placeholder="Deskripsi tugas">
    <input id="deadlineBaru" type="date">
    <button onclick="tambahTugas()">Tambah Tugas</button>
  </div>
</div>

<div class="card">
  <h2>Daftar Siswa</h2>
  <ul id="siswaList"></ul>
</div>

</main>

<footer>&copy; 2025 QUARTRIX</footer>

<script>
/* LOGIN */
const role = localStorage.getItem("role");
const nama = localStorage.getItem("nama");
const absen = localStorage.getItem("absen");
if(!role) location.href="login.html";

/* INFO */
info.innerText = role==="admin"
  ? "Anda login sebagai ADMIN"
  : `Selamat datang, ${nama} (Absen ${absen})`;

/* ADMIN */
if(role==="admin"){
  adminPanel.style.display="block";
  tambahTugasPanel.style.display="block";
}

/* SISWA */
let siswaData = JSON.parse(localStorage.getItem("siswaData")) || [];
function renderSiswa(){
  siswaList.innerHTML="";
  siswaData.sort((a,b)=>a.absen-b.absen);
  siswaData.forEach(s=>{
    const li=document.createElement("li");
    li.textContent=`Absen ${s.absen} — ${s.nama}`;
    siswaList.appendChild(li);
  });
  localStorage.setItem("siswaData",JSON.stringify(siswaData));
}
renderSiswa();

/* JADWAL */
const jadwalData = [
 { hari: "Senin", mataPelajaran: "PKWU", waktu: "08:15 - 09:45" },
  { hari: "Senin", mataPelajaran: "Kimia", waktu: "10:15 - 11:40" },
  { hari: "Senin", mataPelajaran: "Matematika Minat", waktu: "12:30 - 13:50" },
  { hari: "Senin", mataPelajaran: "Sejarah", waktu: "13:50 - 15:00" },
  { hari: "Selasa", mataPelajaran: "Bimbingan Konseling", waktu: "07:00 - 07:40" },
  { hari: "Selasa", mataPelajaran: "Matematika Wajib", waktu: "07:40 - 09:00" },
  { hari: "Selasa", mataPelajaran: "Penjaskes", waktu: "09:00 - 11:30" },
  { hari: "Selasa", mataPelajaran: "Fisika", waktu: "12:20 - 13:40" },
  { hari: "Selasa", mataPelajaran: "Bahasa Inggris", waktu: "13:40 - 15:00" },
  { hari: "Rabu", mataPelajaran: "Bahasa Indonesia", waktu: "07:00 - 08:20" },
  { hari: "Rabu", mataPelajaran: "Matematika Minat", waktu: "08:20 - 09:40" },
  { hari: "Rabu", mataPelajaran: "Seni Budaya", waktu: "10:10 - 11:30" },
  { hari: "Rabu", mataPelajaran: "Biologi", waktu: "12:20 - 13:40" },
  { hari: "Rabu", mataPelajaran: "Fisika", waktu: "13:40 - 15:00" },
  { hari: "Kamis", mataPelajaran: "Bahasa Jawa", waktu: "07:00 - 07:40" },
  { hari: "Kamis", mataPelajaran: "Kimia", waktu: "07:40 - 09:40" },
  { hari: "Kamis", mataPelajaran: "Biologi", waktu: "10:10 - 10:50" },
  { hari: "Kamis", mataPelajaran: "Agama", waktu: "12:20 - 13:40" },
  { hari: "Kamis", mataPelajaran: "Bahasa Indonesia", waktu: "13:40 - 15:00" },
  { hari: "Jumat", mataPelajaran: "Matematika Wajib", waktu: "07:00 - 08:30" },
  { hari: "Jumat", mataPelajaran: "BMQ", waktu: "08:30 - 09:15" },
  { hari: "Jumat", mataPelajaran: "PPKn", waktu: "09:45 - 11:15" }

];

const hariList = [...new Set(jadwalData.map(j => j.hari))]; 
// Ambil daftar hari unik: ["Senin", "Selasa", "Rabu", "Kamis", "Jumat"]

hariList.forEach(h => {
  const b = document.createElement("button");
  b.textContent = h;
  b.className = "hari-btn";
  b.onclick = () => tampilJadwal(h, b);
  jadwalButtons.appendChild(b);
});

function tampilJadwal(hari, btn) {
  document.querySelectorAll(".hari-btn").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
  jadwalDetail.innerHTML = "";
  jadwalData
    .filter(j => j.hari === hari)
    .forEach(j => {
      const li = document.createElement("li");
      li.textContent = `${j.mataPelajaran} (${j.waktu})`;
      jadwalDetail.appendChild(li);
    });
}

// auto buka hari pertama
tampilJadwal(hariList[0], jadwalButtons.children[0]);


/* TUGAS */
let tugasData = JSON.parse(localStorage.getItem("tugasData")) || [];
function renderTugas(){
  tugasList.innerHTML="";
  tugasData.forEach(t=>{
    const li=document.createElement("li");
    li.textContent=`${t.deskripsi} — ${t.deadline}`;
    tugasList.appendChild(li);
  });
  localStorage.setItem("tugasData",JSON.stringify(tugasData));
}
renderTugas();

function tambahTugas(){
  tugasData.push({
    deskripsi:tugasBaru.value,
    deadline:deadlineBaru.value
  });
  tugasBaru.value="";deadlineBaru.value="";
  renderTugas();
}

/* TAMBAH SISWA */
function tambahSiswa(){
  siswaData.push({nama:namaBaru.value.toUpperCase(),absen:+absenBaru.value});
  namaBaru.value="";absenBaru.value="";
  renderSiswa();
}

/* LOGOUT */
function logout(){
  localStorage.clear();
  location.href="login.html";
}
</script>

</body>
</html>
